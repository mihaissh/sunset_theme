body {
    --window-control-size: 16px; /* increased from 14px for better visibility */
}

@property --custom-window-controls {
    syntax: 'off | on';
    inherits: false;
    initial-value: on;
}

@container body style(--custom-window-controls: on) {
    /* Stash window control icons - from https://icones.js.org/collection/stash */
    .winButtons_c38106 {
        gap: 4px;
        padding-right: calc(var(--gap) + 4px);
    }
    .winButtons_c38106::before {
        margin-right: calc(var(--custom-app-top-bar-height) / 4);
    }
    .winButton_c38106 > svg {
        display: none;
    }
    .winButton_c38106 {
        background: none !important;
        width: calc(var(--window-control-size) * 2.5);
        height: var(--custom-app-top-bar-height);
        position: relative;
        border-radius: 6px;
        transition: background-color var(--button-transition);
    }
    .winButton_c38106:hover {
        background-color: hsla(30, 20%, 40%, 0.08) !important;
    }
    .winButton_c38106::after {
        display: block;
        content: '';
        height: var(--window-control-size);
        width: var(--window-control-size);
        mask-size: contain;
        mask-position: center;
        mask-repeat: no-repeat;
        background-color: var(--text-3);
        transition: background-color var(--button-transition), transform var(--button-transition);
    }
    .winButton_c38106:hover::after {
        background-color: var(--text-1);
    }
    .winButton_c38106:active::after {
        transform: scale(0.9);
    }
    /* Stash Close icon (X) */
    .winButtonClose_c38106::after {
        mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='currentColor' d='M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12z'/%3E%3C/svg%3E");
        background-color: var(--text-3) !important;
    }
    .winButtonClose_c38106:hover::after {
        background-color: var(--red-2) !important;
    }
    /* Stash Minimize icon (horizontal line) */
    .winButtonMinMax_c38106:nth-child(1)::after {
        mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='currentColor' d='M19 13H5v-2h14z'/%3E%3C/svg%3E");
    }
    /* Stash Crop square icon (maximize) */
    .winButtonMinMax_c38106:nth-child(2)::after {
        mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='currentColor' d='M18 4H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 14H6V6h12z'/%3E%3C/svg%3E");
    }
}

@container body style(--custom-window-controls: off) and style(--top-bar-button-position: titlebar) {
    .visual-refresh {
        .winButton_c38106 {
            width: calc(var(--window-control-size) * 2);
            height: calc(var(--window-control-size) * 2);
        }
        .winButtons_c38106 {
            gap: 0;
        }
    }
}

body {
    --window-control-size: 16px; /* increased from 14px for better visibility */
}

@property --custom-window-controls {
    syntax: 'off | on';
    inherits: false;
    initial-value: on;
}

@container body style(--custom-window-controls: on) {
    /* Fluent window control icons - from https://icones.js.org/collection/fluent */
    .winButtons_c38106 {
        gap: 4px;
        padding-right: calc(var(--gap) + 4px);
    }
    .winButtons_c38106::before {
        margin-right: calc(var(--custom-app-top-bar-height) / 4);
    }
    .winButton_c38106 > svg {
        display: none;
    }
    .winButton_c38106 {
        background: none !important;
        width: calc(var(--window-control-size) * 2.5);
        height: var(--custom-app-top-bar-height);
        position: relative;
        border-radius: 6px;
        transition: background-color var(--button-transition);
    }
    .winButton_c38106:hover {
        background-color: hsla(30, 20%, 40%, 0.08) !important;
    }
    .winButton_c38106::after {
        display: block;
        content: '';
        height: var(--window-control-size);
        width: var(--window-control-size);
        mask-size: contain;
        mask-position: center;
        mask-repeat: no-repeat;
        background-color: var(--text-3);
        transition: background-color var(--button-transition), transform var(--button-transition);
    }
    .winButton_c38106:hover::after {
        background-color: var(--text-1);
    }
    .winButton_c38106:active::after {
        transform: scale(0.9);
    }
    /* Fluent Dismiss icon (X) */
    .winButtonClose_c38106::after {
        mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='currentColor' d='m4.21 4.387l.083-.094a1 1 0 0 1 1.32-.083l.094.083L12 10.585l6.293-6.292a1 1 0 1 1 1.414 1.414L13.415 12l6.292 6.293a1 1 0 0 1 .083 1.32l-.083.094a1 1 0 0 1-1.32.083l-.094-.083L12 13.415l-6.293 6.292a1 1 0 0 1-1.414-1.414L10.585 12L4.293 5.707a1 1 0 0 1-.083-1.32z'/%3E%3C/svg%3E");
        background-color: var(--text-3) !important;
    }
    .winButtonClose_c38106:hover::after {
        background-color: var(--red-2) !important;
    }
    /* Fluent Subtract icon (minimize) */
    .winButtonMinMax_c38106:nth-child(1)::after {
        mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='currentColor' d='M4 12a1 1 0 0 1 1-1h14a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1'/%3E%3C/svg%3E");
    }
    /* Fluent Maximize icon */
    .winButtonMinMax_c38106:nth-child(2)::after {
        mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='currentColor' d='M3 5.25A2.25 2.25 0 0 1 5.25 3h13.5A2.25 2.25 0 0 1 21 5.25v13.5A2.25 2.25 0 0 1 18.75 21H5.25A2.25 2.25 0 0 1 3 18.75zM5.25 4.5a.75.75 0 0 0-.75.75v13.5c0 .414.336.75.75.75h13.5a.75.75 0 0 0 .75-.75V5.25a.75.75 0 0 0-.75-.75z'/%3E%3C/svg%3E");
    }
}

@container body style(--custom-window-controls: off) and style(--top-bar-button-position: titlebar) {
    .visual-refresh {
        .winButton_c38106 {
            width: calc(var(--window-control-size) * 2);
            height: calc(var(--window-control-size) * 2);
        }
        .winButtons_c38106 {
            gap: 0;
        }
    }
}
